# 矩形求交问题

定义矩形为两相邻边分别平行于$x$轴、$y$轴的矩形，其由左下和右上两个对角点$(x_1, y_1)$、$(x_2, y_2)$定义。

对一个矩形，其点$(x, y)$组成的集合为

$$\{(x, y) | x \in [x_1, x_2] \land y \in [y_1, y_2]\}$$

## 判断交集

对于两个矩形

$$a = \{(x, y) | x \in [x_{a1}, x_{a2}] \land y \in [y_{a1}, y_{a2}]\}$$

$$b = \{(x, y) | x \in [x_{b1}, x_{b2}] \land y \in [y_{b1}, y_{b2}]\}$$

其存在交集的条件为

$$
\exist (x, y) \in R^2, (x, y) \in A \land (x, y) \in B
$$

即

$$
\exist (x, y) \in R^2, 
\left( x \in [x_{a1}, x_{a2}] \land x \in [x_{b1}, x_{b2}] \right) \land
\left(y \in [y_{a1}, y_{a2}] \land y \in [y_{b1}, y_{b2}] \right)
$$

显然不存在交集的情况是比较好判断的，就是$x$、$y$轴的矩形区间无交集：

$$
x_{a1} > x_{b2} \lor x_{a2} < x_{b1} \lor y_{a1} > y_{b2} \lor y_{a2} < y_{b1}
$$

不符合上式的一定存在交集。

## 求交集面积

判断出是否存在交集后，还要求出交集部分的面积。由于$x$、$y$轴相互正交，问题可以分解为分别在$x$、$y$轴区间求交，那么在有交的前提下，交区间左右端点分别可以求出：

$$
x \in [\max(x_{a1}, x_{b1}), \min(x_{a2}, x_{b2})] \\
y \in [\max(y_{a1}, y_{b1}), \min(y_{a2}, y_{b2})]
$$
