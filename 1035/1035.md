## LCS: Largest common sequence
最长公共子序列问题是从两个序列中选取共同子序列的问题，子序列满足元素在子序列中的顺序与在原序列中的相同。

> 子串是连续的子序列

LCS是典型的DP求解问题。

给定两个序列$s_1$，$s_2$长度分别为$m$，$n$，分别取前$i$位和前$j$位能形成的最长子序列的长度定义为$f(i, j)$，$f(m, n)$即为问题的解：

DP能成立的核心在于$f$是可递推的，能够从一个子问题的最优解推出下一级问题的最优解。

考虑一个$f(i,j)$，新增的元素分别为$s_1[i-1]$和$s_2[j-1]$

如果$s_1[i-1] = s_2[j-1]$，显然有

$$f(i, j) = f(i-1, j-1) + 1$$

如果$s_1[i-1] \not= s_2[j-1]$，那么在二者必然不能同时存在于公共子串中，要么$s_1[i-1]$在，要么$s_2[j-1]$在，要么都不在，有

$$f(i, j) = \max \left\{ f(i-1, j), f(i, j-1), f(i-1, j-1) \right\}$$

同时有边界条件，为加法的幺元：

$$f(0, j) = 0 ,\quad f(i, 0) = 0$$

那么$f(i, j)$可以通过递推得到

可以这么做的关键在于，递推是成立的。函数$f$定义的非常巧妙，它没有得到“最长子序列”究竟是什么，而是得到了抽象的**最长**子序列的长度，因此子问题的拆分和递推合理。